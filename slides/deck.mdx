import { Link } from 'gatsby';
import { nightOwl } from '@code-surfer/themes';
import { themes, Appear, Head } from 'mdx-deck';
import { CodeSurfer, CodeSurferColumns, Step } from 'code-surfer';

import './styles/overrides.css';
import './styles/styles.css';

import MediaQuerySyntax from './images/media-query-syntax.png';
import ComparisonMediaQueryVsContainerQuery from './images/comparison-media-query-vs-container-query.jpg';

export const theme = themes.notes;

<Head>

<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>

</Head>

# CSS Queries

UI Meetup - 17th May 2021

By Phani Rahul Sivalenka

---

# Media Query

---

<div style={{ padding: 16 }}>

A way to apply CSS only when the browser and device environment matches a rule that we specify, for example "_viewport_ is wider than 480 pixels"

</div>

---

### Use cases

<div className="text-left margin-auto w-max-80p">

- They are a key part of responsive web design

- Can also be used to detect other things about the environment our site is running on, for example whether the user is using a touchscreen rather than a mouse

</div>

---

<CodeSurfer theme={nightOwl}>

```css subtitle="Syntax looks like this"
@media media-type and (media-feature-rule) {
  /* CSS rules go here */
}
```

```diff 1[8:18] subtitle="A media type, which tells the browser what kind of media this code is for (e.g. print, or screen)"

```

```diff 1[24:42] subtitle="A media expression, which is a rule, or test that must be passed for the contained CSS to be applied"

```

```diff 2 subtitle="A set of CSS rules that will be applied if the test passes and the media type is correct"

```

</CodeSurfer>

---

### Possible Media Types

<div className="text-left margin-auto w-max-80p">

- `print` — for paged material and for documents viewed on screen in print preview mode
- `screen` — for color computer screens
- `speech` — for screen readers or speech synthesizers
- `all` — includes all media types (default)

</div>

---

# Common media feature rules

<div className="text-left margin-auto w-max-80p">

- Viewport width and height
- Orientation
- Hover
- `prefers-color-scheme`
- `prefers-reduced-motion`
- [More here](https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries#media_features)

</div>

---

## Viewport width and height

---

<CodeSurferColumns themes={[nightOwl, nightOwl]}>

<Step>

<iframe className="fixed resizable-iframe" src="viewport-width.html" />

```css
.items {
  display: flex;
  flex-direction: row;
  /* other styles */
}

.item {
  width: 120px;
  min-width: 120px;
  /* other styles */
}

@media screen and (max-width: 420px) {
  .items {
    flex-direction: column;
  }

  .item {
    width: 100%;
  }
}
```

</Step>

<Step>

<iframe className="fixed resizable-iframe" src="viewport-width.html" />

```diff 1:11 subtitle="when viewport width is greater than 420px"

```

</Step>

<Step>

<iframe className="fixed resizable-iframe" src="viewport-width.html" />

```diff 12:21 subtitle="when viewport width is less than or equal to 420px"

```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[nightOwl, nightOwl]}>

<Step>

<iframe
  className="fixed resizable-iframe"
  src="viewport-width-mobile-first.html"
/>

```css subtitle="Recommended to take mobile-first approach to RWD"
.items {
  display: flex;
  flex-direction: column;
  /* other styles */
}

.item {
  width: 100%;
  /* other styles */
}

@media screen and (min-width: 420px) {
  .items {
    flex-direction: row;
    flex-wrap: wrap;
  }

  .item {
    width: 120px;
    min-width: 120px;
  }
}
```

</Step>

<Step>

<iframe
  className="fixed resizable-iframe"
  src="viewport-width-mobile-first.html"
/>

```diff 1:11 subtitle="first, when viewport width is less than 420px"

```

</Step>

<Step>

<iframe
  className="fixed resizable-iframe"
  src="viewport-width-mobile-first.html"
/>

```diff 12:21 subtitle="then, when viewport width is greater than or equal to 420px"

```

</Step>

</CodeSurferColumns>

---

Refer [MDN: Mobile first responsive design](https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Media_queries#active_learning_mobile_first_responsive_design) for a walkthrough

---

<CodeSurferColumns themes={[nightOwl, nightOwl]}>

<Step>

```css
@media (orientation: landscape) {
  body {
    color: rebeccapurple;
  }
}
```

<div className="plain-text">

Allows us to test for portrait or landscape mode

### Possible Values

- `portrait`
- `landscape`

</div>

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[nightOwl, nightOwl]}>

<Step>

```css
@media (hover: hover) {
  body {
    color: rebeccapurple;
  }
}
```

<div className="plain-text">

To test if the user has the ability to hover over an element, which essentially means they are using some kind of pointing device; touchscreen and keyboard navigation do not hover.

### Possible Values

- `hover`
- `none`

</div>

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[nightOwl, nightOwl]}>

<Step>

```css
body {
  --bg-color: white;
  --text-color: black;

  background-color: var(--bg-color);
  color: var(--text-color);
}

@media screen and (prefers-color-scheme: light) {
  body {
    --bg-color: black;
    --text-color: white;
  }
}
```

<div className="plain-text">

To determine whether we serve a “dark” or a “light” theme based on the user's system or browser preferences.

### Possible Values

- `dark`
- `light`

</div>

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[nightOwl, nightOwl]}>

<Step>

```css
@media screen and (prefers-reduced-motion: reduce) {
  * {
    /* Very short durations means JavaScript that 
    relies on events still works */
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
  }
}
```

<div className="plain-text">

To detect if the user has the reduced motion preference activated to minimize the amount of movements and animations.

### Possible Values

- `reduce`
- `no-preference`

</div>

</Step>

</CodeSurferColumns>

---

# Media Query: Logical Operators

---

<CodeSurferColumns themes={[nightOwl, nightOwl]}>

<Step>

```css
@media screen and (min-width: 30em) and (orientation: landscape) {
  ...;
}
```

<div className="plain-content">

`and` — for combining multiple media features into a single media query

</div>

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[nightOwl, nightOwl]}>

<Step>

```css
@media not screen and (color), print and (color) {
  ...;
}
```

<div className="plain-content">

`,` (or) — to combine multiple media queries into a single rule

</div>

</Step>

<Step>

```css
@media (not (screen and (color))), (print and (color)) {
  ...;
}
```

<div className="plain-content">

evaluates to

</div>

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[nightOwl, nightOwl]}>

<Step>

```css
@media not all and (monochrome) {
  ...;
}
```

<div className="plain-content">

`not` — to negate an <span style={{ fontWeight: 'bold', fontStyle: 'italic', color: 'orange' }}>entire</span> media query

</div>

</Step>

<Step>

```css
@media not (all and (monochrome)) {
  ...;
}
```

<div className="plain-content">

evaluates to

</div>

</Step>

</CodeSurferColumns>

---

To review, the syntax of media query is as follows

<img src={MediaQuerySyntax} alt="Media Query Syntax" />

---

# References

<div className="text-left margin-auto w-max-80p">

- [MDN: Beginner's guide to media queries](https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Media_queries)
- [CSS-Tricks: A complete guide on CSS Media Queries](https://css-tricks.com/a-complete-guide-to-css-media-queries/)

</div>

---

# Container Query

Experimental

---

While a media query is used to change the document layout based on the size of the viewport,

a container query is used to change the layout of components based on the available width of their container.

---

<img
  src={ComparisonMediaQueryVsContainerQuery}
  alt="Media query vs Container query"
  style={{ height: '100%' }}
/>

---

<div className="warning">

The CSS container queries are only supported in Chrome Canary under an experiment flag for now.

</div>

<picture>
  <source
    type="image/webp"
    srcset="https://caniuse.bitsofco.de/image/css-container-queries.webp"
  />
  <source
    type="image/png"
    srcset="https://caniuse.bitsofco.de/image/css-container-queries.png"
  />
  <img
    src="https://caniuse.bitsofco.de/image/css-container-queries.jpg"
    alt="Data on support for the css-container-queries feature across the major browsers from caniuse.com"
  />
</picture>

---

<CodeSurfer theme={nightOwl}>

```css title="Usage" subtitle="Usage might change as it is still experimental"
.container {
  /* to tell the browser to only repaint the affected area */
  contain: layout inline-size;
}

.child {
  /* default child styles */
}

@container (min-width: 400px) {
  .child {
    /* child styles when its container (.container) width
    is greater than or equal to 400px */
  }
}
```

</CodeSurfer>

---

<p
  class="codepen"
  data-height="498"
  data-theme-id="light"
  data-default-tab="result"
  data-user="shadeed"
  data-slug-hash="ExZEEjZ"
  style="height: 498px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;"
  data-pen-title="Article - QC"
>
  <span>
    See the Pen{' '}
    <a href="https://codepen.io/shadeed/pen/ExZEEjZ">Article - QC</a> by Ahmad
    Shadeed (<a href="https://codepen.io/shadeed">@shadeed</a>) on{' '}
    <a href="https://codepen.io">CodePen</a>.
  </span>
</p>

<div style={{fontSize: '16px'}}>

Source: [Ahmad Shadeed: Say Hello To CSS Container Queries](https://ishadeed.com/article/say-hello-to-css-container-queries/)

</div>

---

# References

<div className="text-left margin-auto w-max-80p">

- [Ahmad Shadeed: Say Hello To CSS Container Queries](https://ishadeed.com/article/say-hello-to-css-container-queries/)
- [CSS Tricks: Say Hello to CSS Container Queries](https://css-tricks.com/say-hello-to-css-container-queries/)
- [CSS Tricks: Next Gen CSS: @container](https://css-tricks.com/next-gen-css-container/)

</div>

---

Thank You
